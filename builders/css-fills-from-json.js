const flatten = require('lodash/flatten')
const toKebabCase = require('lodash/kebabCase')

const PALETTE = require('../dist/colors.meta.json')

const formatHex = require('../utilities/format-hex-value')

const colors = PALETTE.colors.map(colorArray => {
  return colorArray.map(formatClassEntry)
})

printStylesheet(colors)

function formatClassEntry(colorObject) {
  const colorName = toKebabCase(colorObject.name)
  const className = `.fill-${colorName}`
  const colorValue = formatHex(colorObject.value)

  return `${className} {
  fill: ${colorValue};
}`
}

function printStylesheet(colorArrays) {
  const blocks = flatten(colorArrays)

  blocks.unshift(`/* Generated by Color Studio v${PALETTE.version} */`)
  console.log(blocks.join('\n\n'))
}
