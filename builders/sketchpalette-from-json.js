const chunk = require('lodash/chunk')
const print = require('../utilities/print')
const toSketchPalette = require('../utilities/to-sketch-palette')

const PALETTE = require('../dist/colors.meta.json')

const paletteRows = formatPaletteRows(PALETTE.colors)
const sketchPalette = toSketchPalette(paletteRows, {
  _meta: `Generated by Color Palette v${PALETTE.version}`
})

print(sketchPalette)

function formatPaletteRows(colorArrays) {
  const paletteRows = []

  colorArrays.forEach(colorArray => {
    const colors = colorArray.filter(colorObject => !colorObject._meta.alias)

    chunk(colors, 6).forEach(row => {
      paletteRows.push(row)
    })
  })

  return paletteRows
}
