const toKebabCase = require('lodash/kebabCase')

const PALETTE = require('../dist/colors.meta.json')

const formatHex = require('../utilities/to-formatted-hex-value')

const colors = PALETTE.colors.map(colorArray => {
  return colorArray.map(formatVariableEntry)
})

printStylesheet(colors)

function formatVariableEntry(colorObject) {
  const { name, value } = colorObject
  return `$studio-${toKebabCase(name.toLowerCase())}: ${formatHex(value)};`
}

function printStylesheet(colorArrays) {
  const blocks = colorArrays.map(colorArray => {
    return colorArray.join('\n')
  })

  blocks.unshift([`// Generated by Color Studio v${PALETTE.version}`])
  console.log(blocks.join('\n\n'))
}
